"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[502],{9613:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>u});var n=r(9496);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),d=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=d(r),u=a,f=m["".concat(s,".").concat(u)]||m[u]||c[u]||o;return r?n.createElement(f,l(l({ref:t},p),{},{components:r})):n.createElement(f,l({ref:t},p))}));function u(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var d=2;d<o;d++)l[d]=r[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},6070:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var n=r(2081),a=(r(9496),r(9613));const o={},l="spread",i={unversionedId:"spread/readme",id:"spread/readme",title:"spread",description:"spread({ source, targets })",source:"@site/../src/spread/readme.md",sourceDirName:"spread",slug:"/spread/",permalink:"/methods/spread/",draft:!1,editUrl:"https://github.com/effector/patronum/tree/main/src/../src/spread/readme.md",tags:[],version:"current",frontMatter:{},sidebar:"methodsSidebar",previous:{title:"splitMap",permalink:"/methods/split-map/"},next:{title:"status",permalink:"/methods/status/"}},s={},d=[{value:"<code>spread({ source, targets })</code>",id:"spread-source-targets-",level:2},{value:"Motivation",id:"motivation",level:3},{value:"Formulae",id:"formulae",level:3},{value:"Arguments",id:"arguments",level:3},{value:"Example",id:"example",level:3},{value:"Save fields of payload to different stores",id:"save-fields-of-payload-to-different-stores",level:4},{value:"Call events on store changes",id:"call-events-on-store-changes",level:4},{value:"<code>source = spread({ targets })</code>",id:"source--spread-targets-",level:2},{value:"Motivation",id:"motivation-1",level:3},{value:"Formulae",id:"formulae-1",level:3},{value:"Arguments",id:"arguments-1",level:3},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example-1",level:3},{value:"Conditionally save value to stores",id:"conditionally-save-value-to-stores",level:4},{value:"Nested spreading",id:"nested-spreading",level:4}],p={toc:d};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"spread"},"spread"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import { spread } from 'patronum';\n// or\nimport { spread } from 'patronum/spread';\n")),(0,a.kt)("h2",{id:"spread-source-targets-"},(0,a.kt)("inlineCode",{parentName:"h2"},"spread({ source, targets })")),(0,a.kt)("h3",{id:"motivation"},"Motivation"),(0,a.kt)("p",null,"This method allows to trigger many target at once, if they match the source structure.\nIt is useful when you need to destructure object and save values to different stores."),(0,a.kt)("h3",{id:"formulae"},"Formulae"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"spread({ source, targets: { field: target, ... } })\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"When ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," is triggered with ",(0,a.kt)("strong",{parentName:"li"},"object"),", extract ",(0,a.kt)("inlineCode",{parentName:"li"},"field")," from data, and trigger ",(0,a.kt)("inlineCode",{parentName:"li"},"target")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"targets")," can have multiple properties"),(0,a.kt)("li",{parentName:"ul"},"If the ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," was triggered with non-object, nothing would be happening"),(0,a.kt)("li",{parentName:"ul"},"If ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," is triggered with object but without propertpy ",(0,a.kt)("inlineCode",{parentName:"li"},"field"),", target for this ",(0,a.kt)("inlineCode",{parentName:"li"},"field")," will not be triggered")),(0,a.kt)("h3",{id:"arguments"},"Arguments"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"source")," ",(0,a.kt)("inlineCode",{parentName:"li"},"(Event<T>")," | ",(0,a.kt)("inlineCode",{parentName:"li"},"Store<T>")," | ",(0,a.kt)("inlineCode",{parentName:"li"},"Effect<T>)")," \u2014 Source unit, data passed to it should be an object with fields from ",(0,a.kt)("inlineCode",{parentName:"li"},"targets")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"targets")," ",(0,a.kt)("inlineCode",{parentName:"li"},"(Record<string, Event<T> | Store<T> | Effect<T>>)")," \u2014 Flat object which key is key in ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," payload, and value is unit to store value to.")),(0,a.kt)("h3",{id:"example"},"Example"),(0,a.kt)("h4",{id:"save-fields-of-payload-to-different-stores"},"Save fields of payload to different stores"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import { createStore, createEvent } from 'effector';\nimport { spread } from 'patronum/spread';\n\nconst $first = createStore('');\nconst $last = createStore('');\n\nconst formReceived = createEvent();\n\nspread({\n  source: formReceived,\n  targets: {\n    first: $first,\n    last: $last,\n  },\n});\n\n$first.watch((first) => console.log('First name', first));\n$last.watch((last) => console.log('Last name', last));\n\nformReceived({ first: 'Sergey', last: 'Sova' });\n// => First name Sergey\n// => Last name Sova\n\nformReceived({ first: 'Patronum' });\n// => First name Patronum\n")),(0,a.kt)("h4",{id:"call-events-on-store-changes"},"Call events on store changes"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import { createStore, createEvent } from 'effector';\nimport { spread } from 'patronum/spread';\n\nconst save = createEvent();\nconst $form = createStore(null).on(save, (_, form) => form);\n\nconst firstNameChanged = createEvent();\nconst lastNameChanged = createEvent();\n\nspread({\n  source: $form,\n  targets: {\n    first: firstNameChanged,\n    last: lastNameChanged,\n  },\n});\n\nfirstNameChanged.watch((first) => console.log('First name', first));\nlastNameChanged.watch((last) => console.log('Last name', last));\n\nsave({ first: 'Sergey', last: 'Sova' });\n// => First name Sergey\n// => Last name Sova\n\nsave(null);\n// Nothing, because store is null\n")),(0,a.kt)("h2",{id:"source--spread-targets-"},(0,a.kt)("inlineCode",{parentName:"h2"},"source = spread({ targets })")),(0,a.kt)("h3",{id:"motivation-1"},"Motivation"),(0,a.kt)("p",null,"This overload creates event ",(0,a.kt)("inlineCode",{parentName:"p"},"source")," that should be triggered and returns it.\nIt is useful to pass ",(0,a.kt)("inlineCode",{parentName:"p"},"source")," immediately to another method as argument."),(0,a.kt)("h3",{id:"formulae-1"},"Formulae"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"source = spread({ targets: { field: target, ... } })\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"When ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," is triggered with ",(0,a.kt)("strong",{parentName:"li"},"object"),", extract ",(0,a.kt)("inlineCode",{parentName:"li"},"field")," from data, and trigger ",(0,a.kt)("inlineCode",{parentName:"li"},"target")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"targets")," can have multiple properties"),(0,a.kt)("li",{parentName:"ul"},"If the ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," was triggered with non-object, nothing would be happening"),(0,a.kt)("li",{parentName:"ul"},"If ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," is triggered with object but without propertpy ",(0,a.kt)("inlineCode",{parentName:"li"},"field"),", target for this ",(0,a.kt)("inlineCode",{parentName:"li"},"field")," will not be triggered")),(0,a.kt)("h3",{id:"arguments-1"},"Arguments"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"targets")," ",(0,a.kt)("inlineCode",{parentName:"li"},"(Record<string, Event<T> | Store<T> | Effect<T>>)")," \u2014 Flat object which key is key in ",(0,a.kt)("inlineCode",{parentName:"li"},"source")," payload, and value is unit to store value to.")),(0,a.kt)("h3",{id:"returns"},"Returns"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"source")," ",(0,a.kt)("inlineCode",{parentName:"li"},"(Event<T>")," | ",(0,a.kt)("inlineCode",{parentName:"li"},"Store<T>")," | ",(0,a.kt)("inlineCode",{parentName:"li"},"Effect<T>)")," \u2014 Source unit, data passed to it should be an object with fields from ",(0,a.kt)("inlineCode",{parentName:"li"},"targets"))),(0,a.kt)("h3",{id:"example-1"},"Example"),(0,a.kt)("h4",{id:"conditionally-save-value-to-stores"},"Conditionally save value to stores"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import { createStore, createEvent, guard } from 'effector';\nimport { spread } from 'patronum/spread';\n\nconst $first = createStore('');\nconst $last = createStore('');\n\nconst formReceived = createEvent();\n\nguard({\n  source: formReceived,\n  filter: (form) => form.first.length > 0 && form.last.length > 0,\n  target: spread({\n    targets: {\n      first: $first,\n      last: $last,\n    },\n  }),\n});\n\n$first.watch((first) => console.log('First name', first));\n$last.watch((last) => console.log('Last name', last));\n\nformReceived({ first: '', last: '' });\n// Nothing, because filter returned true\n\nformReceived({ first: 'Hello', last: 'World' });\n// => First name Hello\n// => Last name World\n")),(0,a.kt)("h4",{id:"nested-spreading"},"Nested spreading"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const trigger = createEvent();\n\nconst $targetA = createStore('');\nconst $targetB = createStore(0);\nconst $targetC = createStore(false);\n\nspread({\n  source: trigger,\n  targets: {\n    first: $targetA,\n    second: spread({\n      targets: {\n        foo: $targetB,\n        bar: $targetC,\n      },\n    }),\n  },\n});\n\n$targetA.watch((payload) => console.log('targetA', payload));\n$targetB.watch((payload) => console.log('targetB', payload));\n$targetC.watch((payload) => console.log('targetC', payload));\n\ntrigger({\n  first: 'Hello',\n  second: {\n    foo: 200,\n    bar: true,\n  },\n});\n// => targetA Hello\n// => targetB 200\n// => targetC true\n")))}c.isMDXComponent=!0}}]);